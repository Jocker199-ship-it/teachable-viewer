<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Teachable Machine: Загрузка модели</title>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@latest"></script>
    <script src="https://cdn.jsdelivr.net/npm/@teachablemachine/image@latest"></script>
    <style>
        #status { margin-top: 10px; }
    </style>
</head>
<body>
    <h1>Teachable Machine: Загрузка модели</h1>
    <p>Выберите 3 файла, скачанные из Teachable Machine:</p>
    <ul>
        <li><strong>model.json</strong></li>
        <li><strong>metadata.json</strong></li>
        <li><strong>weights.bin</strong></li>
    </ul>

    <label>model.json: <input type="file" id="model-file" accept=".json"></label><br>
    <label>metadata.json: <input type="file" id="metadata-file" accept=".json"></label><br>
    <label>weights.bin: <input type="file" id="weights-file" accept=".bin"></label><br><br>

    <button onclick="loadModel()">Загрузить модель</button>

    <p id="status">⏳ Ожидание загрузки...</p>
    <div id="webcam-container"></div>
    <div id="label-container"></div>

    <script>
        let model, webcam, labelContainer, maxPredictions;

        async function loadModel() {
            const status = document.getElementById("status");
            status.textContent = "⏳ Загружаем модель...";

            try {
                const modelFile = document.getElementById("model-file").files[0];
                const metadataFile = document.getElementById("metadata-file").files[0];
                const weightsFile = document.getElementById("weights-file").files[0];

                if (!modelFile || !metadataFile || !weightsFile) {
                    status.textContent = "❌ Пожалуйста, выберите все 3 файла.";
                    return;
                }

                const files = {
                    model: new File([await modelFile.arrayBuffer()], "model.json"),
                    metadata: new File([await metadataFile.arrayBuffer()], "metadata.json"),
                    weights: new File([await weightsFile.arrayBuffer()], "weights.bin"),
                };

                model = await tmImage.loadFromFiles(files);
                maxPredictions = mode
