<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Teachable Machine: –õ–æ–∫–∞–ª—å–Ω–∞—è –º–æ–¥–µ–ª—å</title>
  <style>
    body { font-family: sans-serif; }
    #status { margin-top: 10px; font-weight: bold; }
    #results { margin-top: 10px; }
  </style>
</head>
<body>
  <h1>Teachable Machine: –ó–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥–µ–ª–∏</h1>
  <p>–í—ã–±–µ—Ä–∏—Ç–µ 3 —Ñ–∞–π–ª–∞, —Å–∫–∞—á–∞–Ω–Ω—ã–µ –∏–∑ Teachable Machine:</p>
  <ul>
    <li><strong>model.json</strong></li>
    <li><strong>metadata.json</strong></li>
    <li><strong>weights.bin</strong></li>
  </ul>

  <label>model.json: <input type="file" id="model-file"></label><br>
  <label>metadata.json: <input type="file" id="metadata-file"></label><br>
  <label>weights.bin: <input type="file" id="weights-file"></label><br><br>

  <button onclick="loadModel()">–ó–∞–≥—Ä—É–∑–∏—Ç—å –º–æ–¥–µ–ª—å</button>

  <div id="status">üïì –û–∂–∏–¥–∞–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏‚Ä¶</div>

  <!-- –°–∫—Ä–∏–ø—Ç –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ –≤—Å–µ—Ö DOM-—ç–ª–µ–º–µ–Ω—Ç–æ–≤ -->
  <script src="https://cdn.jsdelivr.net/npm/@teachablemachine/image@0.8/dist/teachablemachine-image.min.js"></script>
  <script>
    let model;

    async function loadModel() {
      const modelFile = document.getElementById('model-file').files[0];
      const metadataFile = document.getElementById('metadata-file').files[0];
      const weightsFile = document.getElementById('weights-file').files[0];

      if (!modelFile || !metadataFile || !weightsFile) {
        document.getElementById('status').textContent = "‚ùå –ó–∞–≥—Ä—É–∑–∏—Ç–µ –≤—Å–µ —Ç—Ä–∏ —Ñ–∞–π–ª–∞.";
        return;
      }

      const modelURL = URL.createObjectURL(modelFile);
      const metadataURL = URL.createObjectURL(metadataFile);
      const weightsURL = URL.createObjectURL(weightsFile); // –ü—Ä–æ—Å—Ç–æ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏

      try {
        model = await tmImage.load(modelURL, metadataURL);
        document.getElementById('status').textContent = "‚úÖ –ú–æ–¥–µ–ª—å —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω–∞!";
      } catch (error) {
        console.error(error);
        document.getElementById('status').textContent = "‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –º–æ–¥–µ–ª–∏: " + error.message;
      }
    }
  </script>
</body>
</html>
